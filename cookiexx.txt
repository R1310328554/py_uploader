		
RK	qRqAq7SBev	N/A	N/A	N/A	15						
__guid	212959114.289882160309224300.1522849295918.1545	N/A	N/A	N/A	56		
mobileUV	1_16406e60af9_56c10	N/A	N/A	N/A	30				
monitor_count	30	N/A	N/A	N/A	18				
o_cookie	1310328554	N/A	N/A	N/A	21				 我的 QQ
pgv_info	ssid=s7088195291	N/A	N/A	N/A	27				
pgv_pvi	9404854272	N/A	N/A	N/A	20				
pgv_pvid	8020344988	N/A	N/A	N/A	21				
pt2gguin	o1310328554	N/A	N/A	N/A	22				 我的 QQ
ptcz	ebae3b5bd8c50de9bcd4abf034a825265e2ae6617e726b57644704c31623c9d7	N/A	N/A	N/A	71			
ts_refer	www.so.com/s	N/A	N/A	N/A	23				
ts_uid	5157774494	N/A	N/A	N/A	19				
tvfe_boss_uuid	41627d9419d7226c	N/A	N/A	N/A	33			

Response Cookies					1339				
9e67236d07bdc7152e6e2b42b7f00f43	deleted		/	1970-01-01T00:00:01.000Z	88				
9e67236d07bdc7152e6e2b42b7f00f43	7bffd563ac2c576cecaf49a5e59684cd2bce7998a%253A4%253A%257Bi%253A0%253Bs%253A7%253A%25225171401%2522%253Bi%253A1%253Bs%253A14%253A%2522abbp62%2540163.com%2522%253Bi%253A2%253Bi%253A43200%253Bi%253A3%253Ba%253A14%253A%257Bs%253A6%253A%2522status%2522%253Bi%253A2%253Bs%253A5%253A%2522email%2522%253Bs%253A14%253A%2522abbp62%2540163.com%2522%253Bs%253A9%253A%2522logintype%2522%253Bi%253A1%253Bs%253A3%253A%2522uin%2522%253BN%253Bs%253A5%253A%2522phone%2522%253BN%253Bs%253A4%253A%2522wxid%2522%253BN%253Bs%253A6%253A%2522imgurl%2522%253Bs%253A54%253A%2522http%253A%252F%252Finews.gtimg.com%252Fnewsapp_ls%252F0%252F317718547_200200%252F0%2522%253Bs%253A4%253A%2522name%2522%253Bs%253A15%253A%2522%25E6%2597%2585%25E4%25BA%25BA%25E4%25B8%258E%25E9%25A3%258E%25E4%25BF%2597%2522%253Bs%253A10%253A%2522isVerified%2522%253Bb%253A1%253Bs%253A10%253A%2522isRejected%2522%253Bb%253A0%253Bs%253A9%253A%2522agreeAcpt%2522%253Bb%253A0%253Bs%253A6%253A%2522pwdChg%2522%253Bb%253A0%253Bs%253A9%253A%2522avatarChg%2522%253Bb%253A0%253Bs%253A2%253A%2522id%2522%253Bs%253A7%253A%25225171401%2522%253B%257D%257D		/	2018-06-16T18:31:37.000Z	1172				
TSID	u8tadtga476ui6iaclalh6adj1







Request URL:https://imgcache.qq.com/tencentvideo_v1/tvu/js/ftnh5/tvu.uploader.worker.js?v=20170526&l=om.qq.com_


/*! TenVideoUploader - v2.0.0 - 2017-10-30 21:06:34
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team
 */
function bufferToString(a,b){var c=new Uint8Array(a);if("function"==typeof TextDecoder){var d=new TextDecoder(b||"utf-8").decode(c);return d}for(var e=new Array(c.length),f=0,g=c.length;g>f;f++)e[f]=String.fromCharCode(c[f]);return e.join("")}function hexToString(a){for(var b=a.toString(),c="",d=0;d<b.length;d+=2)c+=String.fromCharCode(parseInt(b.substr(d,2),16));return c}function hexToBuffer(a){for(var b=a.toString(),c=[],d=0;d<b.length;d+=2)c.push(parseInt(b.substr(d,2),16));return new Uint8Array(c).buffer}function stringToBuffer(a,b){if("function"==typeof TextEncoder){var c=new TextEncoder(b||"utf-8").encode(a);return c.buffer}for(var d=new Array(a.length),e=0,f=a.length;f>e;e++)d[e]=a.charCodeAt(e);var g=new Uint8Array(d);return g.buffer}function bufferToHexString(a){var b=new Uint8Array(a);return bytesToHex(b)}function wordsToBytes(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function bytesToHex(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}self.tvu=self.tvu||{},function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.CONST_DEF=b()}(self||window,function(){var a={EventType:{SEND:{FILE_SCAN:11,FILE_SCAN_CANCEL:12,BUF_SCAN:21,FILE_UPLOAD:31,FILE_UPLOAD_CANCEL:32},REPLY:{SCAN_START:11,SCAN_ING:12,SCAN_SUCCESS:13,SCAN_CANCEL:14,SCAN_ERROR:15,UPLOAD_START:21,UPLOAD_ING:22,UPLOAD_SUCCESS:23,UPLOAD_CANCEL:24,UPLOAD_ERROR:25,SET_FIOSTARTTIME_FIOLASTTIME:100}},AlgType:{MD5:1,SHA1:2}};return a}),function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.DataDict=b()}(self||window,function(){function a(){this.buffer=null,this.byteTotalLength=0,this.fieldNum=0,this.fieldMap={},this.fieldArr=[]}return a.prototype={add:function(a){for(var b=this,c="[object Array]"===Object.prototype.toString.call(a)?a:[a],d=0,e=c.length;e>d;d++){var f=c[d],g=b.fieldNum++;f.name||(f.name="Field_"+g),f.index=g,b.fieldMap[f.name]=f}b.fieldArr=b.getFieldArray()},update:function(a,b){var c=this,d=c.fieldMap[a];if(d)for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])},get:function(a){var b=this,c=b.fieldMap;return c[a]},getItemValue:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].value:0},getItemOffset:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].offset:0},remove:function(){},setBuffer:function(a){this.buffer=a,this.byteTotalLength=this.buffer.byteLength},fixEncodeField:function(){var a=this,b=a.fieldMap;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("string"==d.type){var e=null;e=1==d.hex?hexToBuffer(d.value):stringToBuffer(d.value,d.encoding),d.type="arraybuffer",d.length=e.byteLength,d.value=e}"arraybuffer"==d.type&&(d.length=d.value.byteLength)}for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if(d.calFieldName){var f=d.calFieldName;if(b[f]){var g=b[f];d.value=g.length}}}for(var h=0,i=a.fieldArr,j=0,k=i.length;k>j;j++){var d=i[j];d.offset=h,h+=d.length}},calTotalLength:function(){var a=this,b=a.fieldMap,c=0;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c+=e.length}a.byteTotalLength=c},encode:function(){var a=this;a.fixEncodeField(),a.calTotalLength();for(var b=a.getFieldArray(),c=a.byteTotalLength,d=new ArrayBuffer(c),e=new DataView(d),f=0,g=0,h=b.length;h>g;g++){var i=b[g];if(!(i.length<=0))switch(i.type){case"int":f=a.encodeIntField(e,i,f);break;case"arraybuffer":f=a.encodeArrayBufferField(e,i,f);break;case"string":f=a.encodeStringField(e,i,f)}}return a.buffer=d,d},encodeIntField:function(a,b,c){var d=b.length;return 1==d?a.setUint8(c,b.value,b.littleEndian):2==d?a.setUint16(c,b.value,b.littleEndian):4==d&&a.setUint32(c,b.value,b.littleEndian),c+d},encodeArrayBufferField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=new Uint8Array(b.value);return e.set(f,c),c+d},encodeStringField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=stringToBuffer(b.value),g=new Uint8Array(f);return e.set(g,c),c+d},decode:function(){var a=this,b=a.buffer,c=a.getFieldArray();if(!b||c.length<=0)return null;for(var d=new DataView(b),e=(new Uint8Array(b),0),f=0,g=c.length;g>f;f++){var h=c[f];switch(h.type){case"int":e=a.decodeIntField(d,h,e);break;case"arraybuffer":e=a.decodeArrayBufferField(d,h,e);break;case"string":e=a.decodeStringField(d,h,e)}}return a.fieldMap},decodeIntField:function(a,b,c){var d=this,e=b.length,f=0,g=c+e;return a.byteLength<g||(1==e?f=a.getUint8(c,b.littleEndian):2==e?f=a.getUint16(c,b.littleEndian):4==e&&(f=a.getUint32(c,b.littleEndian))),b.value=f,d.fixDecodeField(b),g},decodeArrayBufferField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value=null;else{var f=new Uint8Array(a.buffer,c,d);b.value=f.buffer}return e},decodeStringField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value="";else{var f=new Uint8Array(a.buffer,c,d);b.value=bufferToString(f.buffer,b.encoding)}return e},fixDecodeField:function(a){var b=this,c=b.fieldMap;if(a.calFieldName){var d=a.calFieldName;if(c[d]){var e=c[d];e.length=a.value}}},getFieldArray:function(){var a=this,b=a.fieldMap,c=[];for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c.push(e)}return c.sort(function(a,b){return a.index-b.index}),c}},a}),function(a,b){a.SparkMD5=b()}(self||window,function(a){"use strict";var b=function(a,b){return a+b&4294967295},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},j=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},k=function(a){var b,c,d,e,f,g,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)h(k,i(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},l=function(a){var b,c,d,e,f,g,i=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;i>=b;b+=64)h(k,j(a.subarray(b-64,b)));for(a=i>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*i,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var b,c="";for(b=0;4>b;b+=1)c+=m[a>>8*b+4&15]+m[a>>8*b&15];return c},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;c>=b;b+=64)h(this._state,i(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},q.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(h(this._state,a),f=0;16>f;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;d>=b;b+=64)h(this._state,j(c.subarray(b-64,b)));return this._buff=d>b-64?c.subarray(b-64):new Uint8Array(0),this},q.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},q}),function(a,b){a.Sha1_calculator=b()}(self||window,function(){function a(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function b(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}function c(a,b){for(var c=[],d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=0;i<a.length;i+=16){for(var j=d,k=e,l=f,m=g,n=h,o=0;80>o;o++){if(16>o)c[o]=0|a[i+o];else{var p=c[o-3]^c[o-8]^c[o-14]^c[o-16];c[o]=p<<1|p>>>31}var q=(d<<5|d>>>27)+h+(c[o]>>>0)+(20>o?(e&f|~e&g)+1518500249:40>o?(e^f^g)+1859775393:60>o?(e&f|e&g|f&g)-1894007588:(e^f^g)-899497514);h=g,g=f,f=e<<30|e>>>2,e=d,d=q}d=d+j|0,e=e+k|0,f=f+l|0,g=g+m|0,h=h+n|0}return[d,e,f,g,h]}function d(a){this.reset(),this.block.file_size=a}return d.prototype={init:function(){},reset:function(){this.hash=[1732584193,-271733879,-1732584194,271733878,-1009589776],this.block={file_size:0,start:0,end:0}},update:function(a){var b,d,e,f,g,h=this,i=h.block,j=a.byteLength;i.end+=j,b=h.bufToWords(a),i.end===i.file_size?(d=8*i.file_size,e=8*(i.end-i.start),f=Math.floor(d/4294967296),g=4294967295&d,b[e>>>5]|=128<<24-e%32,b[(e+64>>>9<<4)+14]=f,b[(e+64>>>9<<4)+15]=g,h.hash=c(b,h.hash)):h.hash=c(b,h.hash),b=null,i.start=i.end},end:function(){var c=this;return b(a(c.hash))},bufToWords:function(a){var b=a,c=b.byteLength,d=c%4;if(0!=d){var e=new ArrayBuffer(c+4-d),f=new Uint8Array(e);f.set(new Uint8Array(b),0),b=e}for(var g=new DataView(b),h=[],i=b.byteLength>>2,j=0;i>j;j++)h[j]=g.getUint32(j<<2);return g=null,b=null,h}},d}),function(a,b){a.Rusha=b()}(self||window,function(){function a(c){"use strict";var d={fill:0},e=function(a){for(a+=9;a%64>0;a+=1);return a},f=function(a,b){for(var c=b>>2;c<a.length;c++)a[c]=0},g=function(a,b,c){a[b>>2]|=128<<24-(b%4<<3),a[((b>>2)+2&-16)+14]=c>>29,a[((b>>2)+2&-16)+15]=c<<3},h=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g.charCodeAt(c);case 1:a[e+2|0]=g.charCodeAt(c+1);case 2:a[e+1|0]=g.charCodeAt(c+2);case 3:a[0|e]=g.charCodeAt(c+3)}for(f=h;j>f;f=f+4|0)b[e+f>>2]=g.charCodeAt(c+f)<<24|g.charCodeAt(c+f+1)<<16|g.charCodeAt(c+f+2)<<8|g.charCodeAt(c+f+3);switch(i){case 3:a[e+j+1|0]=g.charCodeAt(c+j+2);case 2:a[e+j+2|0]=g.charCodeAt(c+j+1);case 1:a[e+j+3|0]=g.charCodeAt(c+j)}},i=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g[c];case 1:a[e+2|0]=g[c+1];case 2:a[e+1|0]=g[c+2];case 3:a[0|e]=g[c+3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=g[c+f]<<24|g[c+f+1]<<16|g[c+f+2]<<8|g[c+f+3];switch(i){case 3:a[e+j+1|0]=g[c+j+2];case 2:a[e+j+2|0]=g[c+j+1];case 1:a[e+j+3|0]=g[c+j]}},j=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i,k=new Uint8Array(reader.readAsArrayBuffer(g.slice(c,c+d)));if(j>0)switch(h){case 0:a[e+3|0]=k[0];case 1:a[e+2|0]=k[1];case 2:a[e+1|0]=k[2];case 3:a[0|e]=k[3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=k[f]<<24|k[f+1]<<16|k[f+2]<<8|k[f+3];switch(i){case 3:a[e+j+1|0]=k[j+2];case 2:a[e+j+2|0]=k[j+1];case 1:a[e+j+3|0]=k[j]}},k=function(a){switch(b.getDataType(a)){case"string":return h.bind(a);case"array":return i.bind(a);case"buffer":return i.bind(a);case"arraybuffer":return i.bind(new Uint8Array(a));case"view":return i.bind(new Uint8Array(a.buffer,a.byteOffset,a.byteLength));case"blob":return j.bind(a)}},l=function(a){var b,c,d="0123456789abcdef",e=[],f=new Uint8Array(a);for(b=0;b<f.length;b++)c=f[b],e[b]=d.charAt(c>>4&15)+d.charAt(c>>0&15);return e.join("")},m=function(a){var b;if(65536>=a)return 65536;if(16777216>a)for(b=1;a>b;b<<=1);else for(b=16777216;a>b;b+=16777216);return b},n=function(b){if(b%64>0)throw new Error("Chunk size must be a multiple of 128 bit");d.maxChunkLen=b,d.padMaxChunkLen=e(b),d.heap=new ArrayBuffer(m(d.padMaxChunkLen+320+20)),d.h32=new Int32Array(d.heap),d.h8=new Int8Array(d.heap),d.core=new a._core({Int32Array:Int32Array,DataView:DataView},{},d.heap),d.buffer=null};n(c||1048576);var o=function(a,b){d.chunkOffset=0;var c=new Int32Array(a,b+320,5);c[0]=1732584193,c[1]=-271733879,c[2]=-1732584194,c[3]=271733878,c[4]=-1009589776},p=function(a,b){var c=e(a),h=new Int32Array(d.heap,0,c>>2);return f(h,a),g(h,a,b),c},q=function(a,b,c){k(a)(d.h8,d.h32,b,c,0)},r=function(a,b,c,e,f){var g=c;f&&(g=p(c,e)),q(a,b,c),d.core.hash(g,d.padMaxChunkLen)},s=function(a,b){var c=new Int32Array(a,b+320,5),d=new Int32Array(5),e=new DataView(d.buffer);return e.setInt32(0,c[0],!1),e.setInt32(4,c[1],!1),e.setInt32(8,c[2],!1),e.setInt32(12,c[3],!1),e.setInt32(16,c[4],!1),d},t=this.rawDigest=function(a){var b=a.byteLength||a.length||a.size||0;o(d.heap,d.padMaxChunkLen);var c=0,e=d.maxChunkLen;for(c=0;b>c+e;c+=e)r(a,c,e,b,!1);return r(a,c,b-c,b,!0),s(d.heap,d.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(a){return l(t(a).buffer)},this.init=function(){o(d.heap,d.padMaxChunkLen)},this.update=function(a){var b=a.byteLength||a.length||a.size||0,c=d.chunkOffset+b;r(a,0,b,c,b!=d.maxChunkLen),d.chunkOffset=c};var u=this.rawFinalize=function(){return d.chunkOffset%d.maxChunkLen===0&&r([],0,0,d.chunkOffset,!0),s(d.heap,d.padMaxChunkLen).buffer};this.hexFinalize=function(){return l(u())},this.end=this.hexFinalize}"undefined"!=typeof FileReaderSync;var b={getDataType:function(a){if("string"==typeof a)return"string";if(a instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(a))return"buffer";if(a instanceof ArrayBuffer)return"arraybuffer";if(a.buffer instanceof ArrayBuffer)return"view";if(a instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};return a._core=function(a,b,c){"use asm";function d(a,b){a|=0,b|=0;var c=0,d=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;for(f=e[b+320>>2]|0,h=e[b+324>>2]|0,j=e[b+328>>2]|0,l=e[b+332>>2]|0,n=e[b+336>>2]|0,c=0;(c|0)<(a|0);c=c+64|0){for(g=f,i=h,k=j,m=l,o=n,d=0;(d|0)<64;d=d+4|0)q=e[c+d>>2]|0,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[a+d>>2]=q;for(d=a+64|0;(d|0)<(a+80|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+80|0;(d|0)<(a+160|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)+1859775393|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+160|0;(d|0)<(a+240|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|h&l|j&l)|0)+((q+n|0)-1894007588|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+240|0;(d|0)<(a+320|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)-899497514|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;f=f+g|0,h=h+i|0,j=j+k|0,l=l+m|0,n=n+o|0}e[b+320>>2]=f,e[b+324>>2]=h,e[b+328>>2]=j,e[b+332>>2]=l,e[b+336>>2]=n}var e=new a.Int32Array(c);return{hash:d}},a}),function(a,b){"undefined"==typeof File||File.prototype.slice||(File.prototype.webkitSlice&&(File.prototype.slice=File.prototype.webkitSlice),File.prototype.mozSlice&&(File.prototype.slice=File.prototype.mozSlice)),b(a)}(self||window,function(a){function b(a){j.postMessage(a)}function c(a){var b=a.algType;b==n.SHA1?f(a):d(a)}function d(a){function c(){return s[p+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void q.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:p,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,q.onabort=q.onerror=q.onload=null,q=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new o.ArrayBuffer,l=0,n=0,p=a.uniqueKey,q=new FileReader;q.onload=function(e){if(k.append(e.target.result),j++,b({uniqueKey:p,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:p,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},q.onerror=function(a){},q.onabort=function(){},s[p+"_"+a.algType]=1,b({uniqueKey:p,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b+"_"+a.algType]&&(s[b+"_"+a.algType]=0)}function f(a){function c(){return s[o+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void t.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:o,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,t.onabort=t.onerror=t.onload=null,t=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new p(h);g>2147483648&&(k=new q(g)),k.init();var l=0,n=0,o=a.uniqueKey,t=new FileReader;t.onload=function(e){if(k.update(e.target.result),j++,b({uniqueKey:o,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:o,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},t.onerror=function(c){b({uniqueKey:o,eventType:m.REPLY.SCAN_ERROR,algType:a.algType,result:{code:111,msg:"读取文件出错",errorType:3}}),d()},t.onabort=function(){},s[o+"_"+a.algType]=1,b({uniqueKey:o,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function g(a){var b=a.algType;b==n.SHA1?i(a):h(a)}function h(a){var c=a.uniqueKey,d=a.bufferInfo,e=o.ArrayBuffer.hash,f=e(d.buffer);b({uniqueKey:c,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}function i(a){}var j=a,k=j.tvu.ftnhtml5,l=k.CONST_DEF,m=l.EventType,n=l.AlgType,o=j.SparkMD5,p=j.Rusha,q=j.Sha1_calculator,r=2097152,s={};j.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case m.SEND.FILE_SCAN:c(b);break;case m.SEND.FILE_SCAN_CANCEL:e(b);break;case m.SEND.BUF_SCAN:g(b)}},!1)}),function(a,b){b(a)}(self||window,function(a){function b(a){k.postMessage(a)}function c(b){a&&a.console&&a.console.log&&a.console.log("[tvu] "+b)}function d(a){function d(){l(),b({uniqueKey:m,eventType:n.REPLY.UPLOAD_SUCCESS,result:{}})}function e(a,c,d,e){b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ERROR,result:{code:a,msg:c,errorType:d,bossMsg:e}}),l()}function k(){return s[m]?(y=Math.min(v,x+w),void D.readAsArrayBuffer(u.slice(x,y))):(b({uniqueKey:m,eventType:n.REPLY.UPLOAD_CANCEL,result:{}}),void l())}function l(){C.onload=C.onerror=null,C=null,D.onabort=D.onerror=D.onload=null,D=null}var m=a.uniqueKey,o=a.fileInfo,u=a.file,v=o.size,w=o.chunkSize||q,x=(Math.ceil(v/w),0),y=0,z=g(o),A=h(),B=i(z),C=new XMLHttpRequest,D=new FileReader,E=new Date;D.onload=function(a){t||(b({eventType:n.REPLY.SET_FIOSTARTTIME_FIOLASTTIME,result:{now:(new Date).getTime()}}),t=!0);var g=a.target.result,h=p.ArrayBuffer.hash(g),i=new Date;try{var l=f(o,h),q=j(z,g,x,B);C.open("POST",l,!1),C.responseType="arraybuffer",C.setRequestHeader("Accept","*/*"),C.setRequestHeader("Cache-Control","no-cache");try{C.setRequestHeader("User-ReturnCode","")}catch(a){c(a)}if(C.send(q),4==C.readyState){var s=new Date;b({uploadTime:(s-i)/1e3});var u=C.status;if(200==u){var v=C.response;A.setBuffer(v),A.decode();var w=A.getItemValue("Cmd");if(0==w){var y=A.getItemValue("Flag");if(1==y)d();else{var D=A.getItemValue("NextOffset"),F=A.getItemValue("NextOffsetH");x=F*(r/2)+D,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ING,result:{processed:x}}),k()}}else{var G=new Date-E,H="cgi: "+l+", "+w;e(w,"上传服务器返回错误，错误码："+w,1,H),c("Time: "+G+", resultCmd: "+w)}}else{var G=new Date-E;try{var I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,J=C.getResponseHeader("User-ReturnCode")||C.getResponseHeader("user-returncode"),H="CGI: "+l+", User-ReturnCode: "+J+", Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", User-ReturnCode: "+J)}catch(a){var H=a.message+", CGI: "+l+"Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", "+a)}}}}catch(a){var K=l.replace(/&_r=\w+/g,""),G=new Date-E,I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,H="cgi: "+K+", msg: "+a.toString()+", status: "+C.status+", response: "+I;c("Time: "+G+", "+a),e("-1","上传的网络请求异常",1,H);var s=new Date;b({uploadTime:(s-i)/1e3})}},D.onerror=function(a){var b=new Date-E;c("Time: "+b+", "+a),e("error","读取文件出错",3)},D.onabort=function(){},s[m]=1,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_START,result:{}}),k()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b]&&(s[b]=0)}function f(a,b){var c="http://",d=a.serverport;return/https/.test(location.href)&&(c="https://",d=443),[c,a.serverip,":",d,"/ftn_handler?bmd5=",b].join("")}function g(a){var b=a.size,c=b%r,d=Math.round(b/r),e=a.checkkey,f=a.sha,g=(a.md5,new o);return g.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:1007},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"UKeyLen",length:2,value:0,calFieldName:"UKey"},{type:"string",hex:!0,name:"UKey",length:0,value:e},{type:"int",name:"FileKeyLen",length:2,value:0,calFieldName:"FileKey"},{type:"string",hex:!0,name:"FileKey",length:0,value:f},{type:"int",name:"FileSize",length:4,value:c},{type:"int",name:"Offset",length:4,value:0},{type:"int",name:"DataLen",length:4,value:0},{type:"int",name:"file_sizeH",length:4,value:d},{type:"int",name:"OffsetH",length:4,value:0}]),g}function h(){var a=new o;return a.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:0},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"Flag",length:1,value:0},{type:"int",name:"NextOffset",length:4,value:0},{type:"int",name:"NextOffsetH",length:4,value:0}]),a}function i(a){a.encode();var b=a.getItemOffset("Len"),c=a.getItemOffset("Offset"),d=a.getItemOffset("OffsetH"),e=a.getItemOffset("DataLen");return{Len:b,Offset:c,OffsetH:d,DataLen:e}}function j(a,b,c,d){var e=a.buffer,f=e.byteLength,g=b.byteLength,h=f+g,i=new ArrayBuffer(h),j=new Uint8Array(i),k=new Uint8Array(e),l=new Uint8Array(b);j.set(k,0),j.set(l,f);var m=d.Len,n=d.Offset,o=d.OffsetH,p=d.DataLen,q=new DataView(i);q.setUint32(m,h-16,!1);var s=c%r,t=Math.round(c/r);return q.setUint32(n,s,!1),q.setUint32(o,t,!1),q.setUint32(p,g,!1),i}var k=a,l=k.tvu.ftnhtml5,m=l.CONST_DEF,n=m.EventType,o=(m.AlgType,l.DataDict),p=k.SparkMD5,q=524288,r=8589934592,s={},t=!1;k.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case n.SEND.FILE_UPLOAD:d(b);break;case n.SEND.FILE_UPLOAD_CANCEL:e(b)}},!1)});






Request URL:blob:https://om.qq.com/cd71bb74-7c45-41aa-818e-371317a993a2

/*! TenVideoUploader - v2.0.0 - 2017-10-30 21:06:34
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team
 */
function bufferToString(a,b){var c=new Uint8Array(a);if("function"==typeof TextDecoder){var d=new TextDecoder(b||"utf-8").decode(c);return d}for(var e=new Array(c.length),f=0,g=c.length;g>f;f++)e[f]=String.fromCharCode(c[f]);return e.join("")}function hexToString(a){for(var b=a.toString(),c="",d=0;d<b.length;d+=2)c+=String.fromCharCode(parseInt(b.substr(d,2),16));return c}function hexToBuffer(a){for(var b=a.toString(),c=[],d=0;d<b.length;d+=2)c.push(parseInt(b.substr(d,2),16));return new Uint8Array(c).buffer}function stringToBuffer(a,b){if("function"==typeof TextEncoder){var c=new TextEncoder(b||"utf-8").encode(a);return c.buffer}for(var d=new Array(a.length),e=0,f=a.length;f>e;e++)d[e]=a.charCodeAt(e);var g=new Uint8Array(d);return g.buffer}function bufferToHexString(a){var b=new Uint8Array(a);return bytesToHex(b)}function wordsToBytes(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function bytesToHex(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}self.tvu=self.tvu||{},function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.CONST_DEF=b()}(self||window,function(){var a={EventType:{SEND:{FILE_SCAN:11,FILE_SCAN_CANCEL:12,BUF_SCAN:21,FILE_UPLOAD:31,FILE_UPLOAD_CANCEL:32},REPLY:{SCAN_START:11,SCAN_ING:12,SCAN_SUCCESS:13,SCAN_CANCEL:14,SCAN_ERROR:15,UPLOAD_START:21,UPLOAD_ING:22,UPLOAD_SUCCESS:23,UPLOAD_CANCEL:24,UPLOAD_ERROR:25,SET_FIOSTARTTIME_FIOLASTTIME:100}},AlgType:{MD5:1,SHA1:2}};return a}),function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.DataDict=b()}(self||window,function(){function a(){this.buffer=null,this.byteTotalLength=0,this.fieldNum=0,this.fieldMap={},this.fieldArr=[]}return a.prototype={add:function(a){for(var b=this,c="[object Array]"===Object.prototype.toString.call(a)?a:[a],d=0,e=c.length;e>d;d++){var f=c[d],g=b.fieldNum++;f.name||(f.name="Field_"+g),f.index=g,b.fieldMap[f.name]=f}b.fieldArr=b.getFieldArray()},update:function(a,b){var c=this,d=c.fieldMap[a];if(d)for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])},get:function(a){var b=this,c=b.fieldMap;return c[a]},getItemValue:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].value:0},getItemOffset:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].offset:0},remove:function(){},setBuffer:function(a){this.buffer=a,this.byteTotalLength=this.buffer.byteLength},fixEncodeField:function(){var a=this,b=a.fieldMap;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("string"==d.type){var e=null;e=1==d.hex?hexToBuffer(d.value):stringToBuffer(d.value,d.encoding),d.type="arraybuffer",d.length=e.byteLength,d.value=e}"arraybuffer"==d.type&&(d.length=d.value.byteLength)}for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if(d.calFieldName){var f=d.calFieldName;if(b[f]){var g=b[f];d.value=g.length}}}for(var h=0,i=a.fieldArr,j=0,k=i.length;k>j;j++){var d=i[j];d.offset=h,h+=d.length}},calTotalLength:function(){var a=this,b=a.fieldMap,c=0;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c+=e.length}a.byteTotalLength=c},encode:function(){var a=this;a.fixEncodeField(),a.calTotalLength();for(var b=a.getFieldArray(),c=a.byteTotalLength,d=new ArrayBuffer(c),e=new DataView(d),f=0,g=0,h=b.length;h>g;g++){var i=b[g];if(!(i.length<=0))switch(i.type){case"int":f=a.encodeIntField(e,i,f);break;case"arraybuffer":f=a.encodeArrayBufferField(e,i,f);break;case"string":f=a.encodeStringField(e,i,f)}}return a.buffer=d,d},encodeIntField:function(a,b,c){var d=b.length;return 1==d?a.setUint8(c,b.value,b.littleEndian):2==d?a.setUint16(c,b.value,b.littleEndian):4==d&&a.setUint32(c,b.value,b.littleEndian),c+d},encodeArrayBufferField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=new Uint8Array(b.value);return e.set(f,c),c+d},encodeStringField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=stringToBuffer(b.value),g=new Uint8Array(f);return e.set(g,c),c+d},decode:function(){var a=this,b=a.buffer,c=a.getFieldArray();if(!b||c.length<=0)return null;for(var d=new DataView(b),e=(new Uint8Array(b),0),f=0,g=c.length;g>f;f++){var h=c[f];switch(h.type){case"int":e=a.decodeIntField(d,h,e);break;case"arraybuffer":e=a.decodeArrayBufferField(d,h,e);break;case"string":e=a.decodeStringField(d,h,e)}}return a.fieldMap},decodeIntField:function(a,b,c){var d=this,e=b.length,f=0,g=c+e;return a.byteLength<g||(1==e?f=a.getUint8(c,b.littleEndian):2==e?f=a.getUint16(c,b.littleEndian):4==e&&(f=a.getUint32(c,b.littleEndian))),b.value=f,d.fixDecodeField(b),g},decodeArrayBufferField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value=null;else{var f=new Uint8Array(a.buffer,c,d);b.value=f.buffer}return e},decodeStringField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value="";else{var f=new Uint8Array(a.buffer,c,d);b.value=bufferToString(f.buffer,b.encoding)}return e},fixDecodeField:function(a){var b=this,c=b.fieldMap;if(a.calFieldName){var d=a.calFieldName;if(c[d]){var e=c[d];e.length=a.value}}},getFieldArray:function(){var a=this,b=a.fieldMap,c=[];for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c.push(e)}return c.sort(function(a,b){return a.index-b.index}),c}},a}),function(a,b){a.SparkMD5=b()}(self||window,function(a){"use strict";var b=function(a,b){return a+b&4294967295},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},j=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},k=function(a){var b,c,d,e,f,g,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)h(k,i(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},l=function(a){var b,c,d,e,f,g,i=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;i>=b;b+=64)h(k,j(a.subarray(b-64,b)));for(a=i>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*i,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var b,c="";for(b=0;4>b;b+=1)c+=m[a>>8*b+4&15]+m[a>>8*b&15];return c},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;c>=b;b+=64)h(this._state,i(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},q.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(h(this._state,a),f=0;16>f;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;d>=b;b+=64)h(this._state,j(c.subarray(b-64,b)));return this._buff=d>b-64?c.subarray(b-64):new Uint8Array(0),this},q.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},q}),function(a,b){a.Sha1_calculator=b()}(self||window,function(){function a(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function b(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}function c(a,b){for(var c=[],d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=0;i<a.length;i+=16){for(var j=d,k=e,l=f,m=g,n=h,o=0;80>o;o++){if(16>o)c[o]=0|a[i+o];else{var p=c[o-3]^c[o-8]^c[o-14]^c[o-16];c[o]=p<<1|p>>>31}var q=(d<<5|d>>>27)+h+(c[o]>>>0)+(20>o?(e&f|~e&g)+1518500249:40>o?(e^f^g)+1859775393:60>o?(e&f|e&g|f&g)-1894007588:(e^f^g)-899497514);h=g,g=f,f=e<<30|e>>>2,e=d,d=q}d=d+j|0,e=e+k|0,f=f+l|0,g=g+m|0,h=h+n|0}return[d,e,f,g,h]}function d(a){this.reset(),this.block.file_size=a}return d.prototype={init:function(){},reset:function(){this.hash=[1732584193,-271733879,-1732584194,271733878,-1009589776],this.block={file_size:0,start:0,end:0}},update:function(a){var b,d,e,f,g,h=this,i=h.block,j=a.byteLength;i.end+=j,b=h.bufToWords(a),i.end===i.file_size?(d=8*i.file_size,e=8*(i.end-i.start),f=Math.floor(d/4294967296),g=4294967295&d,b[e>>>5]|=128<<24-e%32,b[(e+64>>>9<<4)+14]=f,b[(e+64>>>9<<4)+15]=g,h.hash=c(b,h.hash)):h.hash=c(b,h.hash),b=null,i.start=i.end},end:function(){var c=this;return b(a(c.hash))},bufToWords:function(a){var b=a,c=b.byteLength,d=c%4;if(0!=d){var e=new ArrayBuffer(c+4-d),f=new Uint8Array(e);f.set(new Uint8Array(b),0),b=e}for(var g=new DataView(b),h=[],i=b.byteLength>>2,j=0;i>j;j++)h[j]=g.getUint32(j<<2);return g=null,b=null,h}},d}),function(a,b){a.Rusha=b()}(self||window,function(){function a(c){"use strict";var d={fill:0},e=function(a){for(a+=9;a%64>0;a+=1);return a},f=function(a,b){for(var c=b>>2;c<a.length;c++)a[c]=0},g=function(a,b,c){a[b>>2]|=128<<24-(b%4<<3),a[((b>>2)+2&-16)+14]=c>>29,a[((b>>2)+2&-16)+15]=c<<3},h=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g.charCodeAt(c);case 1:a[e+2|0]=g.charCodeAt(c+1);case 2:a[e+1|0]=g.charCodeAt(c+2);case 3:a[0|e]=g.charCodeAt(c+3)}for(f=h;j>f;f=f+4|0)b[e+f>>2]=g.charCodeAt(c+f)<<24|g.charCodeAt(c+f+1)<<16|g.charCodeAt(c+f+2)<<8|g.charCodeAt(c+f+3);switch(i){case 3:a[e+j+1|0]=g.charCodeAt(c+j+2);case 2:a[e+j+2|0]=g.charCodeAt(c+j+1);case 1:a[e+j+3|0]=g.charCodeAt(c+j)}},i=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g[c];case 1:a[e+2|0]=g[c+1];case 2:a[e+1|0]=g[c+2];case 3:a[0|e]=g[c+3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=g[c+f]<<24|g[c+f+1]<<16|g[c+f+2]<<8|g[c+f+3];switch(i){case 3:a[e+j+1|0]=g[c+j+2];case 2:a[e+j+2|0]=g[c+j+1];case 1:a[e+j+3|0]=g[c+j]}},j=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i,k=new Uint8Array(reader.readAsArrayBuffer(g.slice(c,c+d)));if(j>0)switch(h){case 0:a[e+3|0]=k[0];case 1:a[e+2|0]=k[1];case 2:a[e+1|0]=k[2];case 3:a[0|e]=k[3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=k[f]<<24|k[f+1]<<16|k[f+2]<<8|k[f+3];switch(i){case 3:a[e+j+1|0]=k[j+2];case 2:a[e+j+2|0]=k[j+1];case 1:a[e+j+3|0]=k[j]}},k=function(a){switch(b.getDataType(a)){case"string":return h.bind(a);case"array":return i.bind(a);case"buffer":return i.bind(a);case"arraybuffer":return i.bind(new Uint8Array(a));case"view":return i.bind(new Uint8Array(a.buffer,a.byteOffset,a.byteLength));case"blob":return j.bind(a)}},l=function(a){var b,c,d="0123456789abcdef",e=[],f=new Uint8Array(a);for(b=0;b<f.length;b++)c=f[b],e[b]=d.charAt(c>>4&15)+d.charAt(c>>0&15);return e.join("")},m=function(a){var b;if(65536>=a)return 65536;if(16777216>a)for(b=1;a>b;b<<=1);else for(b=16777216;a>b;b+=16777216);return b},n=function(b){if(b%64>0)throw new Error("Chunk size must be a multiple of 128 bit");d.maxChunkLen=b,d.padMaxChunkLen=e(b),d.heap=new ArrayBuffer(m(d.padMaxChunkLen+320+20)),d.h32=new Int32Array(d.heap),d.h8=new Int8Array(d.heap),d.core=new a._core({Int32Array:Int32Array,DataView:DataView},{},d.heap),d.buffer=null};n(c||1048576);var o=function(a,b){d.chunkOffset=0;var c=new Int32Array(a,b+320,5);c[0]=1732584193,c[1]=-271733879,c[2]=-1732584194,c[3]=271733878,c[4]=-1009589776},p=function(a,b){var c=e(a),h=new Int32Array(d.heap,0,c>>2);return f(h,a),g(h,a,b),c},q=function(a,b,c){k(a)(d.h8,d.h32,b,c,0)},r=function(a,b,c,e,f){var g=c;f&&(g=p(c,e)),q(a,b,c),d.core.hash(g,d.padMaxChunkLen)},s=function(a,b){var c=new Int32Array(a,b+320,5),d=new Int32Array(5),e=new DataView(d.buffer);return e.setInt32(0,c[0],!1),e.setInt32(4,c[1],!1),e.setInt32(8,c[2],!1),e.setInt32(12,c[3],!1),e.setInt32(16,c[4],!1),d},t=this.rawDigest=function(a){var b=a.byteLength||a.length||a.size||0;o(d.heap,d.padMaxChunkLen);var c=0,e=d.maxChunkLen;for(c=0;b>c+e;c+=e)r(a,c,e,b,!1);return r(a,c,b-c,b,!0),s(d.heap,d.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(a){return l(t(a).buffer)},this.init=function(){o(d.heap,d.padMaxChunkLen)},this.update=function(a){var b=a.byteLength||a.length||a.size||0,c=d.chunkOffset+b;r(a,0,b,c,b!=d.maxChunkLen),d.chunkOffset=c};var u=this.rawFinalize=function(){return d.chunkOffset%d.maxChunkLen===0&&r([],0,0,d.chunkOffset,!0),s(d.heap,d.padMaxChunkLen).buffer};this.hexFinalize=function(){return l(u())},this.end=this.hexFinalize}"undefined"!=typeof FileReaderSync;var b={getDataType:function(a){if("string"==typeof a)return"string";if(a instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(a))return"buffer";if(a instanceof ArrayBuffer)return"arraybuffer";if(a.buffer instanceof ArrayBuffer)return"view";if(a instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};return a._core=function(a,b,c){"use asm";function d(a,b){a|=0,b|=0;var c=0,d=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;for(f=e[b+320>>2]|0,h=e[b+324>>2]|0,j=e[b+328>>2]|0,l=e[b+332>>2]|0,n=e[b+336>>2]|0,c=0;(c|0)<(a|0);c=c+64|0){for(g=f,i=h,k=j,m=l,o=n,d=0;(d|0)<64;d=d+4|0)q=e[c+d>>2]|0,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[a+d>>2]=q;for(d=a+64|0;(d|0)<(a+80|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+80|0;(d|0)<(a+160|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)+1859775393|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+160|0;(d|0)<(a+240|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|h&l|j&l)|0)+((q+n|0)-1894007588|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+240|0;(d|0)<(a+320|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)-899497514|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;f=f+g|0,h=h+i|0,j=j+k|0,l=l+m|0,n=n+o|0}e[b+320>>2]=f,e[b+324>>2]=h,e[b+328>>2]=j,e[b+332>>2]=l,e[b+336>>2]=n}var e=new a.Int32Array(c);return{hash:d}},a}),function(a,b){"undefined"==typeof File||File.prototype.slice||(File.prototype.webkitSlice&&(File.prototype.slice=File.prototype.webkitSlice),File.prototype.mozSlice&&(File.prototype.slice=File.prototype.mozSlice)),b(a)}(self||window,function(a){function b(a){j.postMessage(a)}function c(a){var b=a.algType;b==n.SHA1?f(a):d(a)}function d(a){function c(){return s[p+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void q.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:p,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,q.onabort=q.onerror=q.onload=null,q=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new o.ArrayBuffer,l=0,n=0,p=a.uniqueKey,q=new FileReader;q.onload=function(e){if(k.append(e.target.result),j++,b({uniqueKey:p,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:p,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},q.onerror=function(a){},q.onabort=function(){},s[p+"_"+a.algType]=1,b({uniqueKey:p,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b+"_"+a.algType]&&(s[b+"_"+a.algType]=0)}function f(a){function c(){return s[o+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void t.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:o,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,t.onabort=t.onerror=t.onload=null,t=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new p(h);g>2147483648&&(k=new q(g)),k.init();var l=0,n=0,o=a.uniqueKey,t=new FileReader;t.onload=function(e){if(k.update(e.target.result),j++,b({uniqueKey:o,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:o,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},t.onerror=function(c){b({uniqueKey:o,eventType:m.REPLY.SCAN_ERROR,algType:a.algType,result:{code:111,msg:"读取文件出错",errorType:3}}),d()},t.onabort=function(){},s[o+"_"+a.algType]=1,b({uniqueKey:o,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function g(a){var b=a.algType;b==n.SHA1?i(a):h(a)}function h(a){var c=a.uniqueKey,d=a.bufferInfo,e=o.ArrayBuffer.hash,f=e(d.buffer);b({uniqueKey:c,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}function i(a){}var j=a,k=j.tvu.ftnhtml5,l=k.CONST_DEF,m=l.EventType,n=l.AlgType,o=j.SparkMD5,p=j.Rusha,q=j.Sha1_calculator,r=2097152,s={};j.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case m.SEND.FILE_SCAN:c(b);break;case m.SEND.FILE_SCAN_CANCEL:e(b);break;case m.SEND.BUF_SCAN:g(b)}},!1)}),function(a,b){b(a)}(self||window,function(a){function b(a){k.postMessage(a)}function c(b){a&&a.console&&a.console.log&&a.console.log("[tvu] "+b)}function d(a){function d(){l(),b({uniqueKey:m,eventType:n.REPLY.UPLOAD_SUCCESS,result:{}})}function e(a,c,d,e){b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ERROR,result:{code:a,msg:c,errorType:d,bossMsg:e}}),l()}function k(){return s[m]?(y=Math.min(v,x+w),void D.readAsArrayBuffer(u.slice(x,y))):(b({uniqueKey:m,eventType:n.REPLY.UPLOAD_CANCEL,result:{}}),void l())}function l(){C.onload=C.onerror=null,C=null,D.onabort=D.onerror=D.onload=null,D=null}var m=a.uniqueKey,o=a.fileInfo,u=a.file,v=o.size,w=o.chunkSize||q,x=(Math.ceil(v/w),0),y=0,z=g(o),A=h(),B=i(z),C=new XMLHttpRequest,D=new FileReader,E=new Date;D.onload=function(a){t||(b({eventType:n.REPLY.SET_FIOSTARTTIME_FIOLASTTIME,result:{now:(new Date).getTime()}}),t=!0);var g=a.target.result,h=p.ArrayBuffer.hash(g),i=new Date;try{var l=f(o,h),q=j(z,g,x,B);C.open("POST",l,!1),C.responseType="arraybuffer",C.setRequestHeader("Accept","*/*"),C.setRequestHeader("Cache-Control","no-cache");try{C.setRequestHeader("User-ReturnCode","")}catch(a){c(a)}if(C.send(q),4==C.readyState){var s=new Date;b({uploadTime:(s-i)/1e3});var u=C.status;if(200==u){var v=C.response;A.setBuffer(v),A.decode();var w=A.getItemValue("Cmd");if(0==w){var y=A.getItemValue("Flag");if(1==y)d();else{var D=A.getItemValue("NextOffset"),F=A.getItemValue("NextOffsetH");x=F*(r/2)+D,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ING,result:{processed:x}}),k()}}else{var G=new Date-E,H="cgi: "+l+", "+w;e(w,"上传服务器返回错误，错误码："+w,1,H),c("Time: "+G+", resultCmd: "+w)}}else{var G=new Date-E;try{var I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,J=C.getResponseHeader("User-ReturnCode")||C.getResponseHeader("user-returncode"),H="CGI: "+l+", User-ReturnCode: "+J+", Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", User-ReturnCode: "+J)}catch(a){var H=a.message+", CGI: "+l+"Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", "+a)}}}}catch(a){var K=l.replace(/&_r=\w+/g,""),G=new Date-E,I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,H="cgi: "+K+", msg: "+a.toString()+", status: "+C.status+", response: "+I;c("Time: "+G+", "+a),e("-1","上传的网络请求异常",1,H);var s=new Date;b({uploadTime:(s-i)/1e3})}},D.onerror=function(a){var b=new Date-E;c("Time: "+b+", "+a),e("error","读取文件出错",3)},D.onabort=function(){},s[m]=1,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_START,result:{}}),k()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b]&&(s[b]=0)}function f(a,b){var c="http://",d=a.serverport;return/https/.test(location.href)&&(c="https://",d=443),[c,a.serverip,":",d,"/ftn_handler?bmd5=",b].join("")}function g(a){var b=a.size,c=b%r,d=Math.round(b/r),e=a.checkkey,f=a.sha,g=(a.md5,new o);return g.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:1007},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"UKeyLen",length:2,value:0,calFieldName:"UKey"},{type:"string",hex:!0,name:"UKey",length:0,value:e},{type:"int",name:"FileKeyLen",length:2,value:0,calFieldName:"FileKey"},{type:"string",hex:!0,name:"FileKey",length:0,value:f},{type:"int",name:"FileSize",length:4,value:c},{type:"int",name:"Offset",length:4,value:0},{type:"int",name:"DataLen",length:4,value:0},{type:"int",name:"file_sizeH",length:4,value:d},{type:"int",name:"OffsetH",length:4,value:0}]),g}function h(){var a=new o;return a.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:0},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"Flag",length:1,value:0},{type:"int",name:"NextOffset",length:4,value:0},{type:"int",name:"NextOffsetH",length:4,value:0}]),a}function i(a){a.encode();var b=a.getItemOffset("Len"),c=a.getItemOffset("Offset"),d=a.getItemOffset("OffsetH"),e=a.getItemOffset("DataLen");return{Len:b,Offset:c,OffsetH:d,DataLen:e}}function j(a,b,c,d){var e=a.buffer,f=e.byteLength,g=b.byteLength,h=f+g,i=new ArrayBuffer(h),j=new Uint8Array(i),k=new Uint8Array(e),l=new Uint8Array(b);j.set(k,0),j.set(l,f);var m=d.Len,n=d.Offset,o=d.OffsetH,p=d.DataLen,q=new DataView(i);q.setUint32(m,h-16,!1);var s=c%r,t=Math.round(c/r);return q.setUint32(n,s,!1),q.setUint32(o,t,!1),q.setUint32(p,g,!1),i}var k=a,l=k.tvu.ftnhtml5,m=l.CONST_DEF,n=m.EventType,o=(m.AlgType,l.DataDict),p=k.SparkMD5,q=524288,r=8589934592,s={},t=!1;k.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case n.SEND.FILE_UPLOAD:d(b);break;case n.SEND.FILE_UPLOAD_CANCEL:e(b)}},!1)});




Request URL:blob:https://om.qq.com/111138a8-ecf1-41ea-810b-5af31a7bd725

/*! TenVideoUploader - v2.0.0 - 2017-10-30 21:06:34
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team
 */
function bufferToString(a,b){var c=new Uint8Array(a);if("function"==typeof TextDecoder){var d=new TextDecoder(b||"utf-8").decode(c);return d}for(var e=new Array(c.length),f=0,g=c.length;g>f;f++)e[f]=String.fromCharCode(c[f]);return e.join("")}function hexToString(a){for(var b=a.toString(),c="",d=0;d<b.length;d+=2)c+=String.fromCharCode(parseInt(b.substr(d,2),16));return c}function hexToBuffer(a){for(var b=a.toString(),c=[],d=0;d<b.length;d+=2)c.push(parseInt(b.substr(d,2),16));return new Uint8Array(c).buffer}function stringToBuffer(a,b){if("function"==typeof TextEncoder){var c=new TextEncoder(b||"utf-8").encode(a);return c.buffer}for(var d=new Array(a.length),e=0,f=a.length;f>e;e++)d[e]=a.charCodeAt(e);var g=new Uint8Array(d);return g.buffer}function bufferToHexString(a){var b=new Uint8Array(a);return bytesToHex(b)}function wordsToBytes(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function bytesToHex(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}self.tvu=self.tvu||{},function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.CONST_DEF=b()}(self||window,function(){var a={EventType:{SEND:{FILE_SCAN:11,FILE_SCAN_CANCEL:12,BUF_SCAN:21,FILE_UPLOAD:31,FILE_UPLOAD_CANCEL:32},REPLY:{SCAN_START:11,SCAN_ING:12,SCAN_SUCCESS:13,SCAN_CANCEL:14,SCAN_ERROR:15,UPLOAD_START:21,UPLOAD_ING:22,UPLOAD_SUCCESS:23,UPLOAD_CANCEL:24,UPLOAD_ERROR:25,SET_FIOSTARTTIME_FIOLASTTIME:100}},AlgType:{MD5:1,SHA1:2}};return a}),function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.DataDict=b()}(self||window,function(){function a(){this.buffer=null,this.byteTotalLength=0,this.fieldNum=0,this.fieldMap={},this.fieldArr=[]}return a.prototype={add:function(a){for(var b=this,c="[object Array]"===Object.prototype.toString.call(a)?a:[a],d=0,e=c.length;e>d;d++){var f=c[d],g=b.fieldNum++;f.name||(f.name="Field_"+g),f.index=g,b.fieldMap[f.name]=f}b.fieldArr=b.getFieldArray()},update:function(a,b){var c=this,d=c.fieldMap[a];if(d)for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])},get:function(a){var b=this,c=b.fieldMap;return c[a]},getItemValue:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].value:0},getItemOffset:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].offset:0},remove:function(){},setBuffer:function(a){this.buffer=a,this.byteTotalLength=this.buffer.byteLength},fixEncodeField:function(){var a=this,b=a.fieldMap;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("string"==d.type){var e=null;e=1==d.hex?hexToBuffer(d.value):stringToBuffer(d.value,d.encoding),d.type="arraybuffer",d.length=e.byteLength,d.value=e}"arraybuffer"==d.type&&(d.length=d.value.byteLength)}for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if(d.calFieldName){var f=d.calFieldName;if(b[f]){var g=b[f];d.value=g.length}}}for(var h=0,i=a.fieldArr,j=0,k=i.length;k>j;j++){var d=i[j];d.offset=h,h+=d.length}},calTotalLength:function(){var a=this,b=a.fieldMap,c=0;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c+=e.length}a.byteTotalLength=c},encode:function(){var a=this;a.fixEncodeField(),a.calTotalLength();for(var b=a.getFieldArray(),c=a.byteTotalLength,d=new ArrayBuffer(c),e=new DataView(d),f=0,g=0,h=b.length;h>g;g++){var i=b[g];if(!(i.length<=0))switch(i.type){case"int":f=a.encodeIntField(e,i,f);break;case"arraybuffer":f=a.encodeArrayBufferField(e,i,f);break;case"string":f=a.encodeStringField(e,i,f)}}return a.buffer=d,d},encodeIntField:function(a,b,c){var d=b.length;return 1==d?a.setUint8(c,b.value,b.littleEndian):2==d?a.setUint16(c,b.value,b.littleEndian):4==d&&a.setUint32(c,b.value,b.littleEndian),c+d},encodeArrayBufferField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=new Uint8Array(b.value);return e.set(f,c),c+d},encodeStringField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=stringToBuffer(b.value),g=new Uint8Array(f);return e.set(g,c),c+d},decode:function(){var a=this,b=a.buffer,c=a.getFieldArray();if(!b||c.length<=0)return null;for(var d=new DataView(b),e=(new Uint8Array(b),0),f=0,g=c.length;g>f;f++){var h=c[f];switch(h.type){case"int":e=a.decodeIntField(d,h,e);break;case"arraybuffer":e=a.decodeArrayBufferField(d,h,e);break;case"string":e=a.decodeStringField(d,h,e)}}return a.fieldMap},decodeIntField:function(a,b,c){var d=this,e=b.length,f=0,g=c+e;return a.byteLength<g||(1==e?f=a.getUint8(c,b.littleEndian):2==e?f=a.getUint16(c,b.littleEndian):4==e&&(f=a.getUint32(c,b.littleEndian))),b.value=f,d.fixDecodeField(b),g},decodeArrayBufferField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value=null;else{var f=new Uint8Array(a.buffer,c,d);b.value=f.buffer}return e},decodeStringField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value="";else{var f=new Uint8Array(a.buffer,c,d);b.value=bufferToString(f.buffer,b.encoding)}return e},fixDecodeField:function(a){var b=this,c=b.fieldMap;if(a.calFieldName){var d=a.calFieldName;if(c[d]){var e=c[d];e.length=a.value}}},getFieldArray:function(){var a=this,b=a.fieldMap,c=[];for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c.push(e)}return c.sort(function(a,b){return a.index-b.index}),c}},a}),function(a,b){a.SparkMD5=b()}(self||window,function(a){"use strict";var b=function(a,b){return a+b&4294967295},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},j=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},k=function(a){var b,c,d,e,f,g,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)h(k,i(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},l=function(a){var b,c,d,e,f,g,i=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;i>=b;b+=64)h(k,j(a.subarray(b-64,b)));for(a=i>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*i,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var b,c="";for(b=0;4>b;b+=1)c+=m[a>>8*b+4&15]+m[a>>8*b&15];return c},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;c>=b;b+=64)h(this._state,i(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},q.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(h(this._state,a),f=0;16>f;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;d>=b;b+=64)h(this._state,j(c.subarray(b-64,b)));return this._buff=d>b-64?c.subarray(b-64):new Uint8Array(0),this},q.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},q}),function(a,b){a.Sha1_calculator=b()}(self||window,function(){function a(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function b(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}function c(a,b){for(var c=[],d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=0;i<a.length;i+=16){for(var j=d,k=e,l=f,m=g,n=h,o=0;80>o;o++){if(16>o)c[o]=0|a[i+o];else{var p=c[o-3]^c[o-8]^c[o-14]^c[o-16];c[o]=p<<1|p>>>31}var q=(d<<5|d>>>27)+h+(c[o]>>>0)+(20>o?(e&f|~e&g)+1518500249:40>o?(e^f^g)+1859775393:60>o?(e&f|e&g|f&g)-1894007588:(e^f^g)-899497514);h=g,g=f,f=e<<30|e>>>2,e=d,d=q}d=d+j|0,e=e+k|0,f=f+l|0,g=g+m|0,h=h+n|0}return[d,e,f,g,h]}function d(a){this.reset(),this.block.file_size=a}return d.prototype={init:function(){},reset:function(){this.hash=[1732584193,-271733879,-1732584194,271733878,-1009589776],this.block={file_size:0,start:0,end:0}},update:function(a){var b,d,e,f,g,h=this,i=h.block,j=a.byteLength;i.end+=j,b=h.bufToWords(a),i.end===i.file_size?(d=8*i.file_size,e=8*(i.end-i.start),f=Math.floor(d/4294967296),g=4294967295&d,b[e>>>5]|=128<<24-e%32,b[(e+64>>>9<<4)+14]=f,b[(e+64>>>9<<4)+15]=g,h.hash=c(b,h.hash)):h.hash=c(b,h.hash),b=null,i.start=i.end},end:function(){var c=this;return b(a(c.hash))},bufToWords:function(a){var b=a,c=b.byteLength,d=c%4;if(0!=d){var e=new ArrayBuffer(c+4-d),f=new Uint8Array(e);f.set(new Uint8Array(b),0),b=e}for(var g=new DataView(b),h=[],i=b.byteLength>>2,j=0;i>j;j++)h[j]=g.getUint32(j<<2);return g=null,b=null,h}},d}),function(a,b){a.Rusha=b()}(self||window,function(){function a(c){"use strict";var d={fill:0},e=function(a){for(a+=9;a%64>0;a+=1);return a},f=function(a,b){for(var c=b>>2;c<a.length;c++)a[c]=0},g=function(a,b,c){a[b>>2]|=128<<24-(b%4<<3),a[((b>>2)+2&-16)+14]=c>>29,a[((b>>2)+2&-16)+15]=c<<3},h=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g.charCodeAt(c);case 1:a[e+2|0]=g.charCodeAt(c+1);case 2:a[e+1|0]=g.charCodeAt(c+2);case 3:a[0|e]=g.charCodeAt(c+3)}for(f=h;j>f;f=f+4|0)b[e+f>>2]=g.charCodeAt(c+f)<<24|g.charCodeAt(c+f+1)<<16|g.charCodeAt(c+f+2)<<8|g.charCodeAt(c+f+3);switch(i){case 3:a[e+j+1|0]=g.charCodeAt(c+j+2);case 2:a[e+j+2|0]=g.charCodeAt(c+j+1);case 1:a[e+j+3|0]=g.charCodeAt(c+j)}},i=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g[c];case 1:a[e+2|0]=g[c+1];case 2:a[e+1|0]=g[c+2];case 3:a[0|e]=g[c+3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=g[c+f]<<24|g[c+f+1]<<16|g[c+f+2]<<8|g[c+f+3];switch(i){case 3:a[e+j+1|0]=g[c+j+2];case 2:a[e+j+2|0]=g[c+j+1];case 1:a[e+j+3|0]=g[c+j]}},j=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i,k=new Uint8Array(reader.readAsArrayBuffer(g.slice(c,c+d)));if(j>0)switch(h){case 0:a[e+3|0]=k[0];case 1:a[e+2|0]=k[1];case 2:a[e+1|0]=k[2];case 3:a[0|e]=k[3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=k[f]<<24|k[f+1]<<16|k[f+2]<<8|k[f+3];switch(i){case 3:a[e+j+1|0]=k[j+2];case 2:a[e+j+2|0]=k[j+1];case 1:a[e+j+3|0]=k[j]}},k=function(a){switch(b.getDataType(a)){case"string":return h.bind(a);case"array":return i.bind(a);case"buffer":return i.bind(a);case"arraybuffer":return i.bind(new Uint8Array(a));case"view":return i.bind(new Uint8Array(a.buffer,a.byteOffset,a.byteLength));case"blob":return j.bind(a)}},l=function(a){var b,c,d="0123456789abcdef",e=[],f=new Uint8Array(a);for(b=0;b<f.length;b++)c=f[b],e[b]=d.charAt(c>>4&15)+d.charAt(c>>0&15);return e.join("")},m=function(a){var b;if(65536>=a)return 65536;if(16777216>a)for(b=1;a>b;b<<=1);else for(b=16777216;a>b;b+=16777216);return b},n=function(b){if(b%64>0)throw new Error("Chunk size must be a multiple of 128 bit");d.maxChunkLen=b,d.padMaxChunkLen=e(b),d.heap=new ArrayBuffer(m(d.padMaxChunkLen+320+20)),d.h32=new Int32Array(d.heap),d.h8=new Int8Array(d.heap),d.core=new a._core({Int32Array:Int32Array,DataView:DataView},{},d.heap),d.buffer=null};n(c||1048576);var o=function(a,b){d.chunkOffset=0;var c=new Int32Array(a,b+320,5);c[0]=1732584193,c[1]=-271733879,c[2]=-1732584194,c[3]=271733878,c[4]=-1009589776},p=function(a,b){var c=e(a),h=new Int32Array(d.heap,0,c>>2);return f(h,a),g(h,a,b),c},q=function(a,b,c){k(a)(d.h8,d.h32,b,c,0)},r=function(a,b,c,e,f){var g=c;f&&(g=p(c,e)),q(a,b,c),d.core.hash(g,d.padMaxChunkLen)},s=function(a,b){var c=new Int32Array(a,b+320,5),d=new Int32Array(5),e=new DataView(d.buffer);return e.setInt32(0,c[0],!1),e.setInt32(4,c[1],!1),e.setInt32(8,c[2],!1),e.setInt32(12,c[3],!1),e.setInt32(16,c[4],!1),d},t=this.rawDigest=function(a){var b=a.byteLength||a.length||a.size||0;o(d.heap,d.padMaxChunkLen);var c=0,e=d.maxChunkLen;for(c=0;b>c+e;c+=e)r(a,c,e,b,!1);return r(a,c,b-c,b,!0),s(d.heap,d.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(a){return l(t(a).buffer)},this.init=function(){o(d.heap,d.padMaxChunkLen)},this.update=function(a){var b=a.byteLength||a.length||a.size||0,c=d.chunkOffset+b;r(a,0,b,c,b!=d.maxChunkLen),d.chunkOffset=c};var u=this.rawFinalize=function(){return d.chunkOffset%d.maxChunkLen===0&&r([],0,0,d.chunkOffset,!0),s(d.heap,d.padMaxChunkLen).buffer};this.hexFinalize=function(){return l(u())},this.end=this.hexFinalize}"undefined"!=typeof FileReaderSync;var b={getDataType:function(a){if("string"==typeof a)return"string";if(a instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(a))return"buffer";if(a instanceof ArrayBuffer)return"arraybuffer";if(a.buffer instanceof ArrayBuffer)return"view";if(a instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};return a._core=function(a,b,c){"use asm";function d(a,b){a|=0,b|=0;var c=0,d=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;for(f=e[b+320>>2]|0,h=e[b+324>>2]|0,j=e[b+328>>2]|0,l=e[b+332>>2]|0,n=e[b+336>>2]|0,c=0;(c|0)<(a|0);c=c+64|0){for(g=f,i=h,k=j,m=l,o=n,d=0;(d|0)<64;d=d+4|0)q=e[c+d>>2]|0,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[a+d>>2]=q;for(d=a+64|0;(d|0)<(a+80|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+80|0;(d|0)<(a+160|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)+1859775393|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+160|0;(d|0)<(a+240|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|h&l|j&l)|0)+((q+n|0)-1894007588|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+240|0;(d|0)<(a+320|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)-899497514|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;f=f+g|0,h=h+i|0,j=j+k|0,l=l+m|0,n=n+o|0}e[b+320>>2]=f,e[b+324>>2]=h,e[b+328>>2]=j,e[b+332>>2]=l,e[b+336>>2]=n}var e=new a.Int32Array(c);return{hash:d}},a}),function(a,b){"undefined"==typeof File||File.prototype.slice||(File.prototype.webkitSlice&&(File.prototype.slice=File.prototype.webkitSlice),File.prototype.mozSlice&&(File.prototype.slice=File.prototype.mozSlice)),b(a)}(self||window,function(a){function b(a){j.postMessage(a)}function c(a){var b=a.algType;b==n.SHA1?f(a):d(a)}function d(a){function c(){return s[p+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void q.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:p,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,q.onabort=q.onerror=q.onload=null,q=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new o.ArrayBuffer,l=0,n=0,p=a.uniqueKey,q=new FileReader;q.onload=function(e){if(k.append(e.target.result),j++,b({uniqueKey:p,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:p,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},q.onerror=function(a){},q.onabort=function(){},s[p+"_"+a.algType]=1,b({uniqueKey:p,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b+"_"+a.algType]&&(s[b+"_"+a.algType]=0)}function f(a){function c(){return s[o+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void t.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:o,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,t.onabort=t.onerror=t.onload=null,t=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new p(h);g>2147483648&&(k=new q(g)),k.init();var l=0,n=0,o=a.uniqueKey,t=new FileReader;t.onload=function(e){if(k.update(e.target.result),j++,b({uniqueKey:o,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:o,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},t.onerror=function(c){b({uniqueKey:o,eventType:m.REPLY.SCAN_ERROR,algType:a.algType,result:{code:111,msg:"读取文件出错",errorType:3}}),d()},t.onabort=function(){},s[o+"_"+a.algType]=1,b({uniqueKey:o,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function g(a){var b=a.algType;b==n.SHA1?i(a):h(a)}function h(a){var c=a.uniqueKey,d=a.bufferInfo,e=o.ArrayBuffer.hash,f=e(d.buffer);b({uniqueKey:c,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}function i(a){}var j=a,k=j.tvu.ftnhtml5,l=k.CONST_DEF,m=l.EventType,n=l.AlgType,o=j.SparkMD5,p=j.Rusha,q=j.Sha1_calculator,r=2097152,s={};j.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case m.SEND.FILE_SCAN:c(b);break;case m.SEND.FILE_SCAN_CANCEL:e(b);break;case m.SEND.BUF_SCAN:g(b)}},!1)}),function(a,b){b(a)}(self||window,function(a){function b(a){k.postMessage(a)}function c(b){a&&a.console&&a.console.log&&a.console.log("[tvu] "+b)}function d(a){function d(){l(),b({uniqueKey:m,eventType:n.REPLY.UPLOAD_SUCCESS,result:{}})}function e(a,c,d,e){b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ERROR,result:{code:a,msg:c,errorType:d,bossMsg:e}}),l()}function k(){return s[m]?(y=Math.min(v,x+w),void D.readAsArrayBuffer(u.slice(x,y))):(b({uniqueKey:m,eventType:n.REPLY.UPLOAD_CANCEL,result:{}}),void l())}function l(){C.onload=C.onerror=null,C=null,D.onabort=D.onerror=D.onload=null,D=null}var m=a.uniqueKey,o=a.fileInfo,u=a.file,v=o.size,w=o.chunkSize||q,x=(Math.ceil(v/w),0),y=0,z=g(o),A=h(),B=i(z),C=new XMLHttpRequest,D=new FileReader,E=new Date;D.onload=function(a){t||(b({eventType:n.REPLY.SET_FIOSTARTTIME_FIOLASTTIME,result:{now:(new Date).getTime()}}),t=!0);var g=a.target.result,h=p.ArrayBuffer.hash(g),i=new Date;try{var l=f(o,h),q=j(z,g,x,B);C.open("POST",l,!1),C.responseType="arraybuffer",C.setRequestHeader("Accept","*/*"),C.setRequestHeader("Cache-Control","no-cache");try{C.setRequestHeader("User-ReturnCode","")}catch(a){c(a)}if(C.send(q),4==C.readyState){var s=new Date;b({uploadTime:(s-i)/1e3});var u=C.status;if(200==u){var v=C.response;A.setBuffer(v),A.decode();var w=A.getItemValue("Cmd");if(0==w){var y=A.getItemValue("Flag");if(1==y)d();else{var D=A.getItemValue("NextOffset"),F=A.getItemValue("NextOffsetH");x=F*(r/2)+D,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ING,result:{processed:x}}),k()}}else{var G=new Date-E,H="cgi: "+l+", "+w;e(w,"上传服务器返回错误，错误码："+w,1,H),c("Time: "+G+", resultCmd: "+w)}}else{var G=new Date-E;try{var I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,J=C.getResponseHeader("User-ReturnCode")||C.getResponseHeader("user-returncode"),H="CGI: "+l+", User-ReturnCode: "+J+", Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", User-ReturnCode: "+J)}catch(a){var H=a.message+", CGI: "+l+"Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", "+a)}}}}catch(a){var K=l.replace(/&_r=\w+/g,""),G=new Date-E,I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,H="cgi: "+K+", msg: "+a.toString()+", status: "+C.status+", response: "+I;c("Time: "+G+", "+a),e("-1","上传的网络请求异常",1,H);var s=new Date;b({uploadTime:(s-i)/1e3})}},D.onerror=function(a){var b=new Date-E;c("Time: "+b+", "+a),e("error","读取文件出错",3)},D.onabort=function(){},s[m]=1,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_START,result:{}}),k()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b]&&(s[b]=0)}function f(a,b){var c="http://",d=a.serverport;return/https/.test(location.href)&&(c="https://",d=443),[c,a.serverip,":",d,"/ftn_handler?bmd5=",b].join("")}function g(a){var b=a.size,c=b%r,d=Math.round(b/r),e=a.checkkey,f=a.sha,g=(a.md5,new o);return g.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:1007},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"UKeyLen",length:2,value:0,calFieldName:"UKey"},{type:"string",hex:!0,name:"UKey",length:0,value:e},{type:"int",name:"FileKeyLen",length:2,value:0,calFieldName:"FileKey"},{type:"string",hex:!0,name:"FileKey",length:0,value:f},{type:"int",name:"FileSize",length:4,value:c},{type:"int",name:"Offset",length:4,value:0},{type:"int",name:"DataLen",length:4,value:0},{type:"int",name:"file_sizeH",length:4,value:d},{type:"int",name:"OffsetH",length:4,value:0}]),g}function h(){var a=new o;return a.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:0},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"Flag",length:1,value:0},{type:"int",name:"NextOffset",length:4,value:0},{type:"int",name:"NextOffsetH",length:4,value:0}]),a}function i(a){a.encode();var b=a.getItemOffset("Len"),c=a.getItemOffset("Offset"),d=a.getItemOffset("OffsetH"),e=a.getItemOffset("DataLen");return{Len:b,Offset:c,OffsetH:d,DataLen:e}}function j(a,b,c,d){var e=a.buffer,f=e.byteLength,g=b.byteLength,h=f+g,i=new ArrayBuffer(h),j=new Uint8Array(i),k=new Uint8Array(e),l=new Uint8Array(b);j.set(k,0),j.set(l,f);var m=d.Len,n=d.Offset,o=d.OffsetH,p=d.DataLen,q=new DataView(i);q.setUint32(m,h-16,!1);var s=c%r,t=Math.round(c/r);return q.setUint32(n,s,!1),q.setUint32(o,t,!1),q.setUint32(p,g,!1),i}var k=a,l=k.tvu.ftnhtml5,m=l.CONST_DEF,n=m.EventType,o=(m.AlgType,l.DataDict),p=k.SparkMD5,q=524288,r=8589934592,s={},t=!1;k.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case n.SEND.FILE_UPLOAD:d(b);break;case n.SEND.FILE_UPLOAD_CANCEL:e(b)}},!1)});


Request URL:blob:https://om.qq.com/3bc8220a-29fb-4385-a590-8e067415198c

/*! TenVideoUploader - v2.0.0 - 2017-10-30 21:06:34
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team
 */
function bufferToString(a,b){var c=new Uint8Array(a);if("function"==typeof TextDecoder){var d=new TextDecoder(b||"utf-8").decode(c);return d}for(var e=new Array(c.length),f=0,g=c.length;g>f;f++)e[f]=String.fromCharCode(c[f]);return e.join("")}function hexToString(a){for(var b=a.toString(),c="",d=0;d<b.length;d+=2)c+=String.fromCharCode(parseInt(b.substr(d,2),16));return c}function hexToBuffer(a){for(var b=a.toString(),c=[],d=0;d<b.length;d+=2)c.push(parseInt(b.substr(d,2),16));return new Uint8Array(c).buffer}function stringToBuffer(a,b){if("function"==typeof TextEncoder){var c=new TextEncoder(b||"utf-8").encode(a);return c.buffer}for(var d=new Array(a.length),e=0,f=a.length;f>e;e++)d[e]=a.charCodeAt(e);var g=new Uint8Array(d);return g.buffer}function bufferToHexString(a){var b=new Uint8Array(a);return bytesToHex(b)}function wordsToBytes(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function bytesToHex(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}self.tvu=self.tvu||{},function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.CONST_DEF=b()}(self||window,function(){var a={EventType:{SEND:{FILE_SCAN:11,FILE_SCAN_CANCEL:12,BUF_SCAN:21,FILE_UPLOAD:31,FILE_UPLOAD_CANCEL:32},REPLY:{SCAN_START:11,SCAN_ING:12,SCAN_SUCCESS:13,SCAN_CANCEL:14,SCAN_ERROR:15,UPLOAD_START:21,UPLOAD_ING:22,UPLOAD_SUCCESS:23,UPLOAD_CANCEL:24,UPLOAD_ERROR:25,SET_FIOSTARTTIME_FIOLASTTIME:100}},AlgType:{MD5:1,SHA1:2}};return a}),function(a,b){tvu.ftnhtml5=tvu.ftnhtml5||{},tvu.ftnhtml5.DataDict=b()}(self||window,function(){function a(){this.buffer=null,this.byteTotalLength=0,this.fieldNum=0,this.fieldMap={},this.fieldArr=[]}return a.prototype={add:function(a){for(var b=this,c="[object Array]"===Object.prototype.toString.call(a)?a:[a],d=0,e=c.length;e>d;d++){var f=c[d],g=b.fieldNum++;f.name||(f.name="Field_"+g),f.index=g,b.fieldMap[f.name]=f}b.fieldArr=b.getFieldArray()},update:function(a,b){var c=this,d=c.fieldMap[a];if(d)for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])},get:function(a){var b=this,c=b.fieldMap;return c[a]},getItemValue:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].value:0},getItemOffset:function(a){var b=this,c=b.fieldMap;return c[a]?c[a].offset:0},remove:function(){},setBuffer:function(a){this.buffer=a,this.byteTotalLength=this.buffer.byteLength},fixEncodeField:function(){var a=this,b=a.fieldMap;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("string"==d.type){var e=null;e=1==d.hex?hexToBuffer(d.value):stringToBuffer(d.value,d.encoding),d.type="arraybuffer",d.length=e.byteLength,d.value=e}"arraybuffer"==d.type&&(d.length=d.value.byteLength)}for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if(d.calFieldName){var f=d.calFieldName;if(b[f]){var g=b[f];d.value=g.length}}}for(var h=0,i=a.fieldArr,j=0,k=i.length;k>j;j++){var d=i[j];d.offset=h,h+=d.length}},calTotalLength:function(){var a=this,b=a.fieldMap,c=0;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c+=e.length}a.byteTotalLength=c},encode:function(){var a=this;a.fixEncodeField(),a.calTotalLength();for(var b=a.getFieldArray(),c=a.byteTotalLength,d=new ArrayBuffer(c),e=new DataView(d),f=0,g=0,h=b.length;h>g;g++){var i=b[g];if(!(i.length<=0))switch(i.type){case"int":f=a.encodeIntField(e,i,f);break;case"arraybuffer":f=a.encodeArrayBufferField(e,i,f);break;case"string":f=a.encodeStringField(e,i,f)}}return a.buffer=d,d},encodeIntField:function(a,b,c){var d=b.length;return 1==d?a.setUint8(c,b.value,b.littleEndian):2==d?a.setUint16(c,b.value,b.littleEndian):4==d&&a.setUint32(c,b.value,b.littleEndian),c+d},encodeArrayBufferField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=new Uint8Array(b.value);return e.set(f,c),c+d},encodeStringField:function(a,b,c){var d=b.length,e=new Uint8Array(a.buffer),f=stringToBuffer(b.value),g=new Uint8Array(f);return e.set(g,c),c+d},decode:function(){var a=this,b=a.buffer,c=a.getFieldArray();if(!b||c.length<=0)return null;for(var d=new DataView(b),e=(new Uint8Array(b),0),f=0,g=c.length;g>f;f++){var h=c[f];switch(h.type){case"int":e=a.decodeIntField(d,h,e);break;case"arraybuffer":e=a.decodeArrayBufferField(d,h,e);break;case"string":e=a.decodeStringField(d,h,e)}}return a.fieldMap},decodeIntField:function(a,b,c){var d=this,e=b.length,f=0,g=c+e;return a.byteLength<g||(1==e?f=a.getUint8(c,b.littleEndian):2==e?f=a.getUint16(c,b.littleEndian):4==e&&(f=a.getUint32(c,b.littleEndian))),b.value=f,d.fixDecodeField(b),g},decodeArrayBufferField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value=null;else{var f=new Uint8Array(a.buffer,c,d);b.value=f.buffer}return e},decodeStringField:function(a,b,c){var d=b.length,e=c+d;if(a.byteLength<e)b.value="";else{var f=new Uint8Array(a.buffer,c,d);b.value=bufferToString(f.buffer,b.encoding)}return e},fixDecodeField:function(a){var b=this,c=b.fieldMap;if(a.calFieldName){var d=a.calFieldName;if(c[d]){var e=c[d];e.length=a.value}}},getFieldArray:function(){var a=this,b=a.fieldMap,c=[];for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];c.push(e)}return c.sort(function(a,b){return a.index-b.index}),c}},a}),function(a,b){a.SparkMD5=b()}(self||window,function(a){"use strict";var b=function(a,b){return a+b&4294967295},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},j=function(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},k=function(a){var b,c,d,e,f,g,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;j>=b;b+=64)h(k,i(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},l=function(a){var b,c,d,e,f,g,i=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;i>=b;b+=64)h(k,j(a.subarray(b-64,b)));for(a=i>b-64?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;c>b;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;16>b;b+=1)d[b]=0;return e=8*i,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var b,c="";for(b=0;4>b;b+=1)c+=m[a>>8*b+4&15]+m[a>>8*b&15];return c},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;c>=b;b+=64)h(this._state,i(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},q.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(h(this._state,a),f=0;16>f;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;d>=b;b+=64)h(this._state,j(c.subarray(b-64,b)));return this._buff=d>b-64?c.subarray(b-64):new Uint8Array(0),this},q.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},q}),function(a,b){a.Sha1_calculator=b()}(self||window,function(){function a(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function b(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")}function c(a,b){for(var c=[],d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=0;i<a.length;i+=16){for(var j=d,k=e,l=f,m=g,n=h,o=0;80>o;o++){if(16>o)c[o]=0|a[i+o];else{var p=c[o-3]^c[o-8]^c[o-14]^c[o-16];c[o]=p<<1|p>>>31}var q=(d<<5|d>>>27)+h+(c[o]>>>0)+(20>o?(e&f|~e&g)+1518500249:40>o?(e^f^g)+1859775393:60>o?(e&f|e&g|f&g)-1894007588:(e^f^g)-899497514);h=g,g=f,f=e<<30|e>>>2,e=d,d=q}d=d+j|0,e=e+k|0,f=f+l|0,g=g+m|0,h=h+n|0}return[d,e,f,g,h]}function d(a){this.reset(),this.block.file_size=a}return d.prototype={init:function(){},reset:function(){this.hash=[1732584193,-271733879,-1732584194,271733878,-1009589776],this.block={file_size:0,start:0,end:0}},update:function(a){var b,d,e,f,g,h=this,i=h.block,j=a.byteLength;i.end+=j,b=h.bufToWords(a),i.end===i.file_size?(d=8*i.file_size,e=8*(i.end-i.start),f=Math.floor(d/4294967296),g=4294967295&d,b[e>>>5]|=128<<24-e%32,b[(e+64>>>9<<4)+14]=f,b[(e+64>>>9<<4)+15]=g,h.hash=c(b,h.hash)):h.hash=c(b,h.hash),b=null,i.start=i.end},end:function(){var c=this;return b(a(c.hash))},bufToWords:function(a){var b=a,c=b.byteLength,d=c%4;if(0!=d){var e=new ArrayBuffer(c+4-d),f=new Uint8Array(e);f.set(new Uint8Array(b),0),b=e}for(var g=new DataView(b),h=[],i=b.byteLength>>2,j=0;i>j;j++)h[j]=g.getUint32(j<<2);return g=null,b=null,h}},d}),function(a,b){a.Rusha=b()}(self||window,function(){function a(c){"use strict";var d={fill:0},e=function(a){for(a+=9;a%64>0;a+=1);return a},f=function(a,b){for(var c=b>>2;c<a.length;c++)a[c]=0},g=function(a,b,c){a[b>>2]|=128<<24-(b%4<<3),a[((b>>2)+2&-16)+14]=c>>29,a[((b>>2)+2&-16)+15]=c<<3},h=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g.charCodeAt(c);case 1:a[e+2|0]=g.charCodeAt(c+1);case 2:a[e+1|0]=g.charCodeAt(c+2);case 3:a[0|e]=g.charCodeAt(c+3)}for(f=h;j>f;f=f+4|0)b[e+f>>2]=g.charCodeAt(c+f)<<24|g.charCodeAt(c+f+1)<<16|g.charCodeAt(c+f+2)<<8|g.charCodeAt(c+f+3);switch(i){case 3:a[e+j+1|0]=g.charCodeAt(c+j+2);case 2:a[e+j+2|0]=g.charCodeAt(c+j+1);case 1:a[e+j+3|0]=g.charCodeAt(c+j)}},i=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i;if(j>0)switch(h){case 0:a[e+3|0]=g[c];case 1:a[e+2|0]=g[c+1];case 2:a[e+1|0]=g[c+2];case 3:a[0|e]=g[c+3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=g[c+f]<<24|g[c+f+1]<<16|g[c+f+2]<<8|g[c+f+3];switch(i){case 3:a[e+j+1|0]=g[c+j+2];case 2:a[e+j+2|0]=g[c+j+1];case 1:a[e+j+3|0]=g[c+j]}},j=function(a,b,c,d,e){var f,g=this,h=e%4,i=d%4,j=d-i,k=new Uint8Array(reader.readAsArrayBuffer(g.slice(c,c+d)));if(j>0)switch(h){case 0:a[e+3|0]=k[0];case 1:a[e+2|0]=k[1];case 2:a[e+1|0]=k[2];case 3:a[0|e]=k[3]}for(f=4-h;j>f;f=f+=4)b[e+f>>2]=k[f]<<24|k[f+1]<<16|k[f+2]<<8|k[f+3];switch(i){case 3:a[e+j+1|0]=k[j+2];case 2:a[e+j+2|0]=k[j+1];case 1:a[e+j+3|0]=k[j]}},k=function(a){switch(b.getDataType(a)){case"string":return h.bind(a);case"array":return i.bind(a);case"buffer":return i.bind(a);case"arraybuffer":return i.bind(new Uint8Array(a));case"view":return i.bind(new Uint8Array(a.buffer,a.byteOffset,a.byteLength));case"blob":return j.bind(a)}},l=function(a){var b,c,d="0123456789abcdef",e=[],f=new Uint8Array(a);for(b=0;b<f.length;b++)c=f[b],e[b]=d.charAt(c>>4&15)+d.charAt(c>>0&15);return e.join("")},m=function(a){var b;if(65536>=a)return 65536;if(16777216>a)for(b=1;a>b;b<<=1);else for(b=16777216;a>b;b+=16777216);return b},n=function(b){if(b%64>0)throw new Error("Chunk size must be a multiple of 128 bit");d.maxChunkLen=b,d.padMaxChunkLen=e(b),d.heap=new ArrayBuffer(m(d.padMaxChunkLen+320+20)),d.h32=new Int32Array(d.heap),d.h8=new Int8Array(d.heap),d.core=new a._core({Int32Array:Int32Array,DataView:DataView},{},d.heap),d.buffer=null};n(c||1048576);var o=function(a,b){d.chunkOffset=0;var c=new Int32Array(a,b+320,5);c[0]=1732584193,c[1]=-271733879,c[2]=-1732584194,c[3]=271733878,c[4]=-1009589776},p=function(a,b){var c=e(a),h=new Int32Array(d.heap,0,c>>2);return f(h,a),g(h,a,b),c},q=function(a,b,c){k(a)(d.h8,d.h32,b,c,0)},r=function(a,b,c,e,f){var g=c;f&&(g=p(c,e)),q(a,b,c),d.core.hash(g,d.padMaxChunkLen)},s=function(a,b){var c=new Int32Array(a,b+320,5),d=new Int32Array(5),e=new DataView(d.buffer);return e.setInt32(0,c[0],!1),e.setInt32(4,c[1],!1),e.setInt32(8,c[2],!1),e.setInt32(12,c[3],!1),e.setInt32(16,c[4],!1),d},t=this.rawDigest=function(a){var b=a.byteLength||a.length||a.size||0;o(d.heap,d.padMaxChunkLen);var c=0,e=d.maxChunkLen;for(c=0;b>c+e;c+=e)r(a,c,e,b,!1);return r(a,c,b-c,b,!0),s(d.heap,d.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(a){return l(t(a).buffer)},this.init=function(){o(d.heap,d.padMaxChunkLen)},this.update=function(a){var b=a.byteLength||a.length||a.size||0,c=d.chunkOffset+b;r(a,0,b,c,b!=d.maxChunkLen),d.chunkOffset=c};var u=this.rawFinalize=function(){return d.chunkOffset%d.maxChunkLen===0&&r([],0,0,d.chunkOffset,!0),s(d.heap,d.padMaxChunkLen).buffer};this.hexFinalize=function(){return l(u())},this.end=this.hexFinalize}"undefined"!=typeof FileReaderSync;var b={getDataType:function(a){if("string"==typeof a)return"string";if(a instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(a))return"buffer";if(a instanceof ArrayBuffer)return"arraybuffer";if(a.buffer instanceof ArrayBuffer)return"view";if(a instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};return a._core=function(a,b,c){"use asm";function d(a,b){a|=0,b|=0;var c=0,d=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;for(f=e[b+320>>2]|0,h=e[b+324>>2]|0,j=e[b+328>>2]|0,l=e[b+332>>2]|0,n=e[b+336>>2]|0,c=0;(c|0)<(a|0);c=c+64|0){for(g=f,i=h,k=j,m=l,o=n,d=0;(d|0)<64;d=d+4|0)q=e[c+d>>2]|0,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[a+d>>2]=q;for(d=a+64|0;(d|0)<(a+80|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|~h&l)|0)+((q+n|0)+1518500249|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+80|0;(d|0)<(a+160|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)+1859775393|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+160|0;(d|0)<(a+240|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h&j|h&l|j&l)|0)+((q+n|0)-1894007588|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;for(d=a+240|0;(d|0)<(a+320|0);d=d+4|0)q=(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])<<1|(e[d-12>>2]^e[d-32>>2]^e[d-56>>2]^e[d-64>>2])>>>31,p=((f<<5|f>>>27)+(h^j^l)|0)+((q+n|0)-899497514|0)|0,n=l,l=j,j=h<<30|h>>>2,h=f,f=p,e[d>>2]=q;f=f+g|0,h=h+i|0,j=j+k|0,l=l+m|0,n=n+o|0}e[b+320>>2]=f,e[b+324>>2]=h,e[b+328>>2]=j,e[b+332>>2]=l,e[b+336>>2]=n}var e=new a.Int32Array(c);return{hash:d}},a}),function(a,b){"undefined"==typeof File||File.prototype.slice||(File.prototype.webkitSlice&&(File.prototype.slice=File.prototype.webkitSlice),File.prototype.mozSlice&&(File.prototype.slice=File.prototype.mozSlice)),b(a)}(self||window,function(a){function b(a){j.postMessage(a)}function c(a){var b=a.algType;b==n.SHA1?f(a):d(a)}function d(a){function c(){return s[p+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void q.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:p,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,q.onabort=q.onerror=q.onload=null,q=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new o.ArrayBuffer,l=0,n=0,p=a.uniqueKey,q=new FileReader;q.onload=function(e){if(k.append(e.target.result),j++,b({uniqueKey:p,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:p,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},q.onerror=function(a){},q.onabort=function(){},s[p+"_"+a.algType]=1,b({uniqueKey:p,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b+"_"+a.algType]&&(s[b+"_"+a.algType]=0)}function f(a){function c(){return s[o+"_"+a.algType]?(l=j*h,n=Math.min(g,l+h),void t.readAsArrayBuffer(f.slice(l,n))):(b({uniqueKey:o,eventType:m.REPLY.SCAN_CANCEL,algType:a.algType,result:{}}),void d())}function d(){k=null,t.onabort=t.onerror=t.onload=null,t=null}var e=a.fileInfo,f=e.file,g=f.size,h=e.chunkSize||r,i=Math.ceil(g/h),j=0,k=new p(h);g>2147483648&&(k=new q(g)),k.init();var l=0,n=0,o=a.uniqueKey,t=new FileReader;t.onload=function(e){if(k.update(e.target.result),j++,b({uniqueKey:o,eventType:m.REPLY.SCAN_ING,algType:a.algType,result:{processed:n}}),j==i){var f=k.end();d(),b({uniqueKey:o,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}else c()},t.onerror=function(c){b({uniqueKey:o,eventType:m.REPLY.SCAN_ERROR,algType:a.algType,result:{code:111,msg:"读取文件出错",errorType:3}}),d()},t.onabort=function(){},s[o+"_"+a.algType]=1,b({uniqueKey:o,eventType:m.REPLY.SCAN_START,algType:a.algType,result:{}}),c()}function g(a){var b=a.algType;b==n.SHA1?i(a):h(a)}function h(a){var c=a.uniqueKey,d=a.bufferInfo,e=o.ArrayBuffer.hash,f=e(d.buffer);b({uniqueKey:c,eventType:m.REPLY.SCAN_SUCCESS,algType:a.algType,result:{hash:f}})}function i(a){}var j=a,k=j.tvu.ftnhtml5,l=k.CONST_DEF,m=l.EventType,n=l.AlgType,o=j.SparkMD5,p=j.Rusha,q=j.Sha1_calculator,r=2097152,s={};j.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case m.SEND.FILE_SCAN:c(b);break;case m.SEND.FILE_SCAN_CANCEL:e(b);break;case m.SEND.BUF_SCAN:g(b)}},!1)}),function(a,b){b(a)}(self||window,function(a){function b(a){k.postMessage(a)}function c(b){a&&a.console&&a.console.log&&a.console.log("[tvu] "+b)}function d(a){function d(){l(),b({uniqueKey:m,eventType:n.REPLY.UPLOAD_SUCCESS,result:{}})}function e(a,c,d,e){b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ERROR,result:{code:a,msg:c,errorType:d,bossMsg:e}}),l()}function k(){return s[m]?(y=Math.min(v,x+w),void D.readAsArrayBuffer(u.slice(x,y))):(b({uniqueKey:m,eventType:n.REPLY.UPLOAD_CANCEL,result:{}}),void l())}function l(){C.onload=C.onerror=null,C=null,D.onabort=D.onerror=D.onload=null,D=null}var m=a.uniqueKey,o=a.fileInfo,u=a.file,v=o.size,w=o.chunkSize||q,x=(Math.ceil(v/w),0),y=0,z=g(o),A=h(),B=i(z),C=new XMLHttpRequest,D=new FileReader,E=new Date;D.onload=function(a){t||(b({eventType:n.REPLY.SET_FIOSTARTTIME_FIOLASTTIME,result:{now:(new Date).getTime()}}),t=!0);var g=a.target.result,h=p.ArrayBuffer.hash(g),i=new Date;try{var l=f(o,h),q=j(z,g,x,B);C.open("POST",l,!1),C.responseType="arraybuffer",C.setRequestHeader("Accept","*/*"),C.setRequestHeader("Cache-Control","no-cache");try{C.setRequestHeader("User-ReturnCode","")}catch(a){c(a)}if(C.send(q),4==C.readyState){var s=new Date;b({uploadTime:(s-i)/1e3});var u=C.status;if(200==u){var v=C.response;A.setBuffer(v),A.decode();var w=A.getItemValue("Cmd");if(0==w){var y=A.getItemValue("Flag");if(1==y)d();else{var D=A.getItemValue("NextOffset"),F=A.getItemValue("NextOffsetH");x=F*(r/2)+D,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_ING,result:{processed:x}}),k()}}else{var G=new Date-E,H="cgi: "+l+", "+w;e(w,"上传服务器返回错误，错误码："+w,1,H),c("Time: "+G+", resultCmd: "+w)}}else{var G=new Date-E;try{var I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,J=C.getResponseHeader("User-ReturnCode")||C.getResponseHeader("user-returncode"),H="CGI: "+l+", User-ReturnCode: "+J+", Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", User-ReturnCode: "+J)}catch(a){var H=a.message+", CGI: "+l+"Status: "+u+", statusText: "+C.statusText;e(u,"上传的网络请求发生错误",1,H),c("Time: "+G+", "+a)}}}}catch(a){var K=l.replace(/&_r=\w+/g,""),G=new Date-E,I="plain:"+C.response||"text:"+C.responseText||"xml:"+C.responseXML,H="cgi: "+K+", msg: "+a.toString()+", status: "+C.status+", response: "+I;c("Time: "+G+", "+a),e("-1","上传的网络请求异常",1,H);var s=new Date;b({uploadTime:(s-i)/1e3})}},D.onerror=function(a){var b=new Date-E;c("Time: "+b+", "+a),e("error","读取文件出错",3)},D.onabort=function(){},s[m]=1,b({uniqueKey:m,eventType:n.REPLY.UPLOAD_START,result:{}}),k()}function e(a){var b=a.uniqueKey;"undefined"!=typeof s[b]&&(s[b]=0)}function f(a,b){var c="http://",d=a.serverport;return/https/.test(location.href)&&(c="https://",d=443),[c,a.serverip,":",d,"/ftn_handler?bmd5=",b].join("")}function g(a){var b=a.size,c=b%r,d=Math.round(b/r),e=a.checkkey,f=a.sha,g=(a.md5,new o);return g.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:1007},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"UKeyLen",length:2,value:0,calFieldName:"UKey"},{type:"string",hex:!0,name:"UKey",length:0,value:e},{type:"int",name:"FileKeyLen",length:2,value:0,calFieldName:"FileKey"},{type:"string",hex:!0,name:"FileKey",length:0,value:f},{type:"int",name:"FileSize",length:4,value:c},{type:"int",name:"Offset",length:4,value:0},{type:"int",name:"DataLen",length:4,value:0},{type:"int",name:"file_sizeH",length:4,value:d},{type:"int",name:"OffsetH",length:4,value:0}]),g}function h(){var a=new o;return a.add([{type:"int",name:"MagicNum",length:4,value:2882377846},{type:"int",name:"Cmd",length:4,value:0},{type:"int",name:"SaveField",length:4,value:0},{type:"int",name:"Len",length:4,value:0},{type:"int",name:"Flag",length:1,value:0},{type:"int",name:"NextOffset",length:4,value:0},{type:"int",name:"NextOffsetH",length:4,value:0}]),a}function i(a){a.encode();var b=a.getItemOffset("Len"),c=a.getItemOffset("Offset"),d=a.getItemOffset("OffsetH"),e=a.getItemOffset("DataLen");return{Len:b,Offset:c,OffsetH:d,DataLen:e}}function j(a,b,c,d){var e=a.buffer,f=e.byteLength,g=b.byteLength,h=f+g,i=new ArrayBuffer(h),j=new Uint8Array(i),k=new Uint8Array(e),l=new Uint8Array(b);j.set(k,0),j.set(l,f);var m=d.Len,n=d.Offset,o=d.OffsetH,p=d.DataLen,q=new DataView(i);q.setUint32(m,h-16,!1);var s=c%r,t=Math.round(c/r);return q.setUint32(n,s,!1),q.setUint32(o,t,!1),q.setUint32(p,g,!1),i}var k=a,l=k.tvu.ftnhtml5,m=l.CONST_DEF,n=m.EventType,o=(m.AlgType,l.DataDict),p=k.SparkMD5,q=524288,r=8589934592,s={},t=!1;k.addEventListener("message",function(a){var b=a.data;if("undefined"!=typeof b.eventType)switch(b.eventType){case n.SEND.FILE_UPLOAD:d(b);break;case n.SEND.FILE_UPLOAD_CANCEL:e(b)}},!1)});




Request URL:https://sh.ugc.ftn.qq.com/ftn_handler?bmd5=678fdc8873fc4c7dbfcd356dfa7266e2

Accept:*/*
Accept-Encoding:gzip, deflate, sdch, br
Accept-Language:zh-CN,zh;q=0.8
Access-Control-Request-Headers:cache-control, user-returncode
Access-Control-Request-Method:POST
Connection:keep-alive
Host:sh.ugc.ftn.qq.com
Origin:https://om.qq.com
Referer:https://om.qq.com/article/articlePublish
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36

Access-Control-Allow-Headers:cache-control, user-returncode
Access-Control-Allow-Method:POST,OPTIONS
Access-Control-Allow-Origin:https://om.qq.com
Connection:keep-alive
Content-Length:0
Date:Sat, 16 Jun 2018 10:50:51 GMT
Last-Modified:Tue, 07 Apr 2009 08:37:56 GMT
Server:Qnginx/1.3.2
X-NWS-LOG-UUID:dfb0694d-1497-474a-8378-0741107c5ffd




https://sh.ugc.ftn.qq.com/ftn_handler?bmd5=678fdc8873fc4c7dbfcd356dfa7266e2


Accept:*/*
Accept-Encoding:gzip, deflate, br
Accept-Language:zh-CN,zh;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Content-Length:524652
Host:sh.ugc.ftn.qq.com
Origin:https://om.qq.com
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36
User-ReturnCode:


Access-Control-Allow-Origin:https://om.qq.com
Connection:keep-alive
Content-Length:25
Content-Range:bytes 0-0/524288
Content-Type:text/octet
Date:Sat, 16 Jun 2018 10:50:51 GMT
Server:Qnginx/1.3.2
X-NWS-LOG-UUID:632a9cf1-b0ae-495f-838f-c86d1d805469



HEAD Request URL:https://puap.qpic.cn/vpic/0/d0691y3s6wv_fast_5.jpg/0?t=6

一直请求， 直到成功 200 
access-control-allow-origin:*
access-control-expose-headers:X-Upstream-Ip,X-Server-Ip,X-Client-Ip,X-ErrNo
cache-control:max-age=2592000
chid:935008825
content-length:17574
content-type:image/jpeg
date:Sat, 16 Jun 2018 10:50:58 GMT
expires:Mon, 16 Jul 2018 10:50:57 GMT
fid:5966
last-modified:Sat, 16 Jun 2018 18:50:57 GMT
server:NWSs
size:17574
status:200
user-returncode:0
x-bcheck:0_1
x-cache-lookup:Hit From Upstream
x-client-ip:127.0.0.1
x-cpt:filename=0
x-datasrc:2
x-delay:51066 us
x-info:real data
x-nws-log-uuid:25a8248d-3bb8-496d-a717-ac29982b0669
x-region:sz
x-reqgue:0
x-server-ip:119.147.227.38
x-upstream-ip:14.215.140.24:80